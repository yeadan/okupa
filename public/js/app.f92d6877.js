(function(t){function e(e){for(var s,i,r=e[0],l=e[1],c=e[2],d=0,p=[];d<r.length;d++)i=r[d],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&p.push(o[i][0]),o[i]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);u&&u(e);while(p.length)p.shift()();return n.push.apply(n,c||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],s=!0,r=1;r<a.length;r++){var l=a[r];0!==o[l]&&(s=!1)}s&&(n.splice(e--,1),t=i(i.s=a[0]))}return t}var s={},o={app:0},n=[];function i(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=s,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(a,s,function(e){return t[e]}.bind(null,s));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var u=l;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";var s=a("85ec"),o=a.n(s);o.a},"0486":function(t,e,a){},"1cf7":function(t,e,a){"use strict";var s=a("5368"),o=a.n(s);o.a},"2b44":function(t,e,a){},"400f":function(t,e,a){},"46c6":function(t,e,a){"use strict";var s=a("0486"),o=a.n(s);o.a},"4f81":function(t,e,a){},5368:function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e),a.d(e,"router",(function(){return Le}));a("ac1f"),a("5319"),a("e260"),a("e6cf"),a("cca6"),a("a79d");var s,o,n=a("2b0e"),i=a("8c4f"),r=a("2f62"),l=a("ade3"),c="ActionRole",u="ActionToken",d="ActionUserID",p="ActionLogout",m="ChangeRole",v="ChangeToken",h="ChangeUserID",f="Logout",g={role:"",token:"",user_id:""},_={getRole:function(t){return t.role},getToken:function(t){return t.token},getUserID:function(t){return t.user_id}},b=(s={},Object(l["a"])(s,c,(function(t,e){t.commit(m,e)})),Object(l["a"])(s,u,(function(t,e){t.commit(v,e)})),Object(l["a"])(s,d,(function(t,e){t.commit(h,e)})),Object(l["a"])(s,p,(function(t,e){t.commit(f,e)})),s),y=(o={},Object(l["a"])(o,m,(function(t,e){t.role=e,console.log("Role actual: "+t.role)})),Object(l["a"])(o,v,(function(t,e){t.token=e,console.log("Token: "+t.token)})),Object(l["a"])(o,h,(function(t,e){t.user_id=e,console.log("User ID actual: "+t.user_id)})),Object(l["a"])(o,f,(function(t){t.user_id="",t.token="",t.role=""})),o),C={state:g,actions:b,mutations:y,getters:_};n["a"].use(r["a"]);var w=new r["a"].Store({debug:!1,modules:{app:C}}),k=w,O=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("Encabezado"),a("router-view")],1)},x=[],E=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"encabezado"}},[a("nav",{staticClass:"navbar navbar-dark bg-dark"},[a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"navbar-header"},[a("router-link",{staticClass:"navbar-brand",attrs:{to:"/"}},[t._v("PropertyMap")])],1),a("ul",{staticClass:"nav navbar-nav"},[a("li",[a("router-link",{staticClass:"active",attrs:{to:"/"}},[t._v("Inicio")])],1),a("li",[a("router-link",{attrs:{to:"/okupas"}},[t._v("Associations")])],1),a("li",[a("router-link",{attrs:{to:"/owners"}},[t._v("Owners")])],1),"admin"==this.$store.getters.getRole?a("li",{staticClass:"nav-item dropdown"},[a("router-link",{attrs:{to:"/properties"}},[t._v("Properties")]),a("div",{staticClass:"dropdown-menu bg-dark"},[a("router-link",{staticClass:"dropdown-item",attrs:{to:"/properties"}},[t._v("List properties")]),a("router-link",{staticClass:"dropdown-item",attrs:{to:"/addproperties"}},[t._v("Add property")])],1)],1):a("li",[a("router-link",{attrs:{to:"/properties"}},[t._v("Properties")])],1)]),a("ul",{staticClass:"nav navbar-nav navbar-right"},[""!=this.$store.getters.getToken?a("li",[a("router-link",{staticClass:"fa fa-user",attrs:{title:"Users",to:"/users"}},[t._v(" Users ")])],1):a("li",[a("router-link",{staticClass:"fa fa-sign-in",attrs:{title:"Sign Up",to:"/register"}},[t._v(" Sign Up")])],1),a("li",[a("button",{staticClass:"btn-sm btn-light",attrs:{type:"button"},on:{click:function(e){return t.logout()}}},[t._v("Logout")])])])])])])},N=[],$={methods:{logout:function(){var t=this;this.$store.dispatch(p).then((function(){"/#app/register"!=t.$router.resolve(location).href&&t.$router.push("/register")}))}}},P=$,T=(a("c30b"),a("2877")),S=Object(T["a"])(P,E,N,!1,null,"381efe5e",null),A=S.exports,I=(a("ab8b"),a("9537"),a("4989"),{name:"App",components:{Encabezado:A},mounted:function(){var t=document.createElement("script");t.setAttribute("src","https://kit.fontawesome.com/e704792412.js"),t.setAttribute("SameSite","none Secure"),t.setAttribute("crossorigin","anonymous"),document.head.appendChild(t)}}),U=I,j=(a("034f"),Object(T["a"])(U,O,x,!1,null,null,null)),D=j.exports,R=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"body"},[s("div",{attrs:{id:"inicio"}},[""!=t.role?s("h3",[t._v("Página de Inicio ("+t._s(t.role)+")")]):s("h3",[t._v("Página de Inicio")]),s("br"),s("br"),s("img",{attrs:{src:a("e844")}})])])},B=[],M={data:function(){return{role:""}},mounted:function(){this.role=this.$store.getters.getRole}},J=M,L=(a("1cf7"),Object(T["a"])(J,R,B,!1,null,"d273a290",null)),F=L.exports,q=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},K=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container NotFound"},[a("div",{staticClass:"row wrap"},[a("div",{staticClass:"card",attrs:{height:"400",color:"transparent",flat:""}},[a("div",{staticClass:"display-3 mt-5"},[t._v("Error 404 "),a("br"),t._v("Página no encontrada ")]),a("br"),a("br"),a("div",{staticClass:"grey--text lighten-5"},[t._v(" Lo sentimos pero no hemos podido encontrar la página a la que estás intentando acceder. ")]),a("div",{staticClass:"mt-9"},[a("br"),a("small",[t._v("Escoge otra opción del menú de navegación o deja a nuestra IA predecir tu búsqueda "),a("a",{attrs:{target:"blank",href:"http://tinyurl.com/2g9mqh"}},[t._v("aquí")]),t._v(".")])])])])])}],G={},z=Object(T["a"])(G,q,K,!1,null,null,null),V=z.exports,Z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row ",attrs:{id:"users"}},[a("div",{staticClass:"text-center col-md-12 col-lg-6"},[a("div",{staticClass:"card h-100"},[a("div",{staticClass:"card-body"},[a("div",{staticClass:"card-title row"},[a("p",{staticClass:"col 2"}),a("p",{staticClass:"h3 col-8"},[t._v("Usuario ID: "+t._s(t.userdata.user_id))]),a("br"),a("br"),Object.keys(t.userdata).length>0?a("i",{staticClass:"col-2 fas fa-edit",staticStyle:{"line-height":"inherit"},attrs:{title:"Editar"},on:{click:function(e){return t.editUser(t.userdata)}}}):t._e()]),Object.keys(t.userdata).length>0?a("div",{staticClass:"card-text"},[a("p",{attrs:{align:"center"}},[a("small",[a("strong",[t._v("Nombre de usuario: ")]),t._v(t._s(t.userdata.username))])]),a("p",{attrs:{align:"center"}},[a("small",[a("strong",[t._v("Nombre completo: ")]),t._v(t._s(t.userdata.full_name))])]),a("p",{attrs:{align:"center"}},[a("small",[a("strong",[t._v("Fecha registro: ")]),t._v(t._s(t.userdata.registered.toLocaleString("es-ES",{timeZone:"UTC"})))])])]):t._e()])]),a("EditUser")],1),"admin"==t.role?a("div",{staticClass:"text-center col-md-12 col-lg-6"},[a("div",{staticStyle:{margin:"10px"}},[t._m(0),Object.keys(t.datos.users).length>0?a("div",[a("table",{staticClass:"table table-striped",attrs:{id:"listUser"}},[t._m(1),a("tbody",t._l(t.datos.users,(function(e,s){return a("tr",{key:s,staticClass:"filter",on:{click:function(a){return t.editUser(e)}}},[a("td",[t._v(t._s(e.username)+" ")]),a("td",[t._v(t._s(e.full_name)+" ")])])})),0)])]):t._e()])]):t._e()])},H=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card-title row"},[a("h3",{staticClass:"col-9"},[t._v("Editar usuarios")]),a("form",{staticClass:"col-3 "},[a("input",{staticClass:"form-control inputsm",attrs:{type:"text",id:"inputFiltro",placeholder:"Filtrar..."}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("Username")]),a("th",[t._v("Full name")])])])}],Q=(a("4de4"),a("c975"),a("a4d3"),a("e01a"),a("b0c0"),a("bc3a")),W=a.n(Q),X={data:function(){return{loading:!1,datos:{okupas:[],users:[],owners:[],properties:[]}}},methods:{load:function(t){var e=this,a="http://localhost:4444/"+t;W.a.get(a).then((function(a){return e.datos[t]=a.data,e.loading=!1,a.data})).catch((function(t){console.log(t)}))}}},Y={methods:{clickClose:function(t){this.$modal.hide(t)},clickOK:function(t,e,s,o){if(""!=this.input.name&&""!=this.input.description){var n=(new Date).getTime(),i=new Date(n).toISOString();o&&(t.created=i);var r=JSON.stringify(t),l=a("bc3a");l({method:e,url:"http://localhost:4444/"+s,data:r}).then((function(t){console.log(t.data),alert("Guardado")})).catch((function(t){console.log("ERROR: "+t)}))}}}},tt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("modal",{staticClass:"md",attrs:{name:"edit-user-modal",transition:"pop-out",height:"auto",scrollable:!0},on:{"before-open":t.beforeOpen}},[a("div",{staticClass:"card",staticStyle:{padding:"5%"}},[a("div",{staticClass:"card-body"},[a("form",[a("div",{staticClass:"form-group"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-10"},[a("label",{attrs:{for:"input-username"}},[a("strong",[t._v("Username")])]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.input.username,expression:"input.username"}],staticClass:"form-control",attrs:{type:"text",disabled:"",id:"input-username"},domProps:{value:t.input.username},on:{input:function(e){e.target.composing||t.$set(t.input,"username",e.target.value)}}})]),a("div",{staticClass:"col-2"},[a("label",{attrs:{for:"input-id"}},[a("strong",[t._v("User ID")])]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.input.id,expression:"input.id"}],staticClass:"form-control",staticStyle:{"text-align":"center"},attrs:{type:"text",disabled:"",id:"input-id"},domProps:{value:t.input.id},on:{input:function(e){e.target.composing||t.$set(t.input,"id",e.target.value)}}})])]),a("label",{attrs:{for:"input-name"}},[a("strong",[t._v("Name")])]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.input.name,expression:"input.name"}],staticClass:"form-control",attrs:{type:"text",id:"input-name",placeholder:"Name"},domProps:{value:t.input.name},on:{input:function(e){e.target.composing||t.$set(t.input,"name",e.target.value)}}}),a("label",{attrs:{for:"input-password"}},[a("strong",[t._v("Password")])]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.input.password,expression:"input.password"}],staticClass:"form-control",attrs:{type:"password",id:"input-password",placeholder:"New password"},domProps:{value:t.input.password},on:{input:function(e){e.target.composing||t.$set(t.input,"password",e.target.value)}}}),"admin"==t.role?a("label",{attrs:{for:"input-role"}},[a("strong",[t._v("Role")])]):t._e(),"admin"==t.role?a("select",{directives:[{name:"model",rawName:"v-model",value:t.input.role,expression:"input.role"}],staticClass:"form-control",attrs:{id:"input-role"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.input,"role",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"0",disabled:""}},[t._v("Selecciona un rol")]),a("option",[t._v("admin")]),a("option",[t._v("user")]),a("option",[t._v("anonymous")])]):t._e(),a("label",{attrs:{for:"input-created"}},[a("strong",[t._v("Registered")])]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.input.registered,expression:"input.registered"}],staticClass:"form-control",attrs:{type:"text",disabled:"",id:"input-created"},domProps:{value:t.input.registered},on:{input:function(e){e.target.composing||t.$set(t.input,"registered",e.target.value)}}})])]),a("div",{staticClass:"col-6 mx-auto"},[a("button",{staticClass:"btn btn-success",on:{click:function(e){t.clickOK(),t.clickClose()}}},[t._v("Guardar")]),a("button",{staticClass:"btn btn-danger",attrs:{"data-dismiss":"modal"},on:{click:function(e){return t.clickClose()}}},[t._v("Cancelar")])])])])])],1)},et=[],at={data:function(){return{input:{id:0,password:"",name:"",role:"",registered:"",username:""},role:""}},mounted:function(){this.role=this.$store.getters.getRole},methods:{beforeOpen:function(t){this.input.id=t.params.usedUser.user_id,this.input.name=t.params.usedUser.full_name,this.input.role=t.params.usedUser.role,this.input.registered=t.params.usedUser.registered,this.input.username=t.params.usedUser.username,this.input.password=""},clickOK:function(){if(""!=this.input.name&&""!=this.input.role){var t="";t=""!=this.input.password?JSON.stringify({full_name:this.input.name,password:this.input.password,role:this.input.role}):JSON.stringify({full_name:this.input.name,role:this.input.role});var e=a("bc3a");e({method:"put",url:"http://localhost:4444/users/"+this.input.id,data:t}).then((function(t){console.log(t.data),console.log("Guardado")})).catch((function(t){console.log("ERROR: "+t)}))}},clickClose:function(){this.$modal.hide("edit-user-modal")}}},st=at,ot=Object(T["a"])(st,tt,et,!1,null,null,null),nt=ot.exports;a("d3b7");W.a.interceptors.response.use((function(t){return t}),(function(t){if(t.response)return 401==t.response.status&&(console.log("unauthorized, logging out ..."),k.dispatch(p),Le.push("/register")),Promise.reject(t);console.error("Error: Network Error")})),W.a.interceptors.request.use((function(t){var e=k.getters.getToken;if(e&&"https://apiv1.geoapi.es/comunidades?type=JSON&key=2fbda50bcbdc4f0d5ff1b7f08546174f90e60e0de4cc83d2f4cab5ea2708a989&sandbox=0"!=t.baseURL){var a="Bearer "+e;t.headers.Authorization=a}return t}),(function(t){return Promise.reject(t)}));var it=a("1157"),rt=a.n(it),lt={data:function(){return{userdata:"",role:""}},mixins:[X],components:{EditUser:nt},mounted:function(){var t=this;this.role=this.$store.getters.getRole,"admin"==this.role&&this.load("users"),this.user_id=this.$store.getters.getUserID;var e=this.$store.getters.getUserID,a="http://localhost:4444/users/"+e;W.a.get(a).then((function(e){t.userdata=e.data,rt()("#inputFiltro").on("keyup",(function(){var t=rt()(this).val().toLowerCase();rt()("#listUser .filter").filter((function(){rt()(this).toggle(rt()(this).text().toLowerCase().indexOf(t)>-1)}))}))})).catch((function(t){console.log(t)}))},methods:{editUser:function(t){this.$modal.show("edit-user-modal",{usedUser:t})}}},ct=lt,ut=Object(T["a"])(ct,Z,H,!1,null,null,null),dt=ut.exports,pt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row",attrs:{id:"okupas"}},[a("div",{staticClass:"col-lg-6 col-md-12 col-xl-6"},[a("div",{staticStyle:{margin:"10px"}},[a("div",{staticClass:"card-title row"},[a("h3",{staticClass:"col-8"},[t._v(" Asociaciones")]),t._m(0),"admin"==t.role?a("i",{staticClass:" fa fa-plus",staticStyle:{"line-height":"inherit",color:"green",margin:"7px"},attrs:{title:"Añadir"},on:{click:t.addOkupa}}):t._e()]),a("AddOkupa"),t.loading?a("div",{staticClass:"spinner-border text-dark"}):a("div",[Object.keys(t.datos.okupas).length>0?a("div",[a("table",{staticClass:"table table-striped  ",attrs:{id:"listOkupa"}},[t._m(1),a("tbody",t._l(t.datos.okupas,(function(e,s){return a("tr",{key:s,staticClass:"filter",on:{click:function(a){t.getokupa(e.okupa_id),t.getmembers(e.okupa_id)}}},[a("td",[t._v(t._s(e.okupa_id))]),a("td",[t._v(t._s(e.name))])])})),0)])]):a("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[t._v(" No hay asociaciones okupas ")])])],1)]),a("div",{staticClass:"col-lg-3 col-xl-3 col-md-6"},[a("div",{staticClass:"card h-100"},[a("div",{staticClass:"card-body"},["admin"==t.role&&""!=t.okupasdata?a("div",{staticClass:"row card-title"},[a("h5",{staticClass:"col-9 "},[t._v("Asociación")]),a("i",{staticClass:"col-1 fas fa-edit",staticStyle:{"line-height":"inherit"},attrs:{title:"Editar"},on:{click:t.editOkupa}}),a("i",{staticClass:"col-1 fas fa-trash-alt",staticStyle:{"line-height":"inherit"},attrs:{title:"Borrar"},on:{click:t.deleteOkupa}})]):a("div",{staticClass:"card-title"},[a("h5",[t._v("Asociación")])]),a("EditOkupa"),""!=t.okupasdata?a("div",{attrs:{align:"left"}},[a("p",{staticClass:"card-text"},[a("small",[a("strong",[t._v("Id asociación: ")]),t._v(t._s(t.okupasdata.okupa_id))])]),a("p",{staticClass:"card-text"},[a("small",[a("strong",[t._v("Nombre: ")]),t._v(t._s(t.okupasdata.name))])]),a("p",{staticClass:"card-text"},[a("small",[a("strong",[t._v("Descripción: ")]),t._v(" "+t._s(t.okupasdata.description))])]),a("p",{staticClass:"card-text"},[a("small",[a("strong",[t._v("Fecha registro: ")]),t._v(t._s(t.okupasdata.created))])])]):a("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[a("small",[t._v("Ninguna asociación seleccionada")])])],1)])]),a("div",{staticClass:"col-lg-3 col-md-6 col-xl-3"},[a("div",{staticClass:"card h-100"},[a("div",{staticClass:"card-body"},[a("div",{staticClass:"card-tittle row"},[a("h5",{staticClass:"card-title col-10"},[t._v("Miembros")]),"admin"==t.role?a("i",{staticClass:"col-1 fa fa-user-plus",staticStyle:{"line-height":"inherit",color:"green"},attrs:{title:"Añadir miembro"},on:{click:t.adminAddMember}}):a("i",{staticClass:"col-1 fa fa-user-plus",staticStyle:{"line-height":"inherit",color:"green"},attrs:{title:"Añadir Miembro"},on:{click:t.addMember}}),a("AdminAddOkupa",{on:{addNewUser:t.addNewUserFunc}})],1),Object.keys(t.miembrosdata).length>0?a("div",t._l(t.miembrosdata,(function(e,s){return a("div",{key:s,staticClass:"row"},[a("div",{staticClass:" col-8",attrs:{id:"members"}},[a("p",{staticClass:"card-text"},[a("small",[t._v(t._s(e.full_name)+" ")])])]),"admin"==t.role||t.user_id==e.user_id?a("div",{staticClass:" col-4"},[a("i",{staticClass:"fa fa-remove",staticStyle:{color:"red"},attrs:{title:"Borrar miembro"},on:{click:function(a){return t.delMember(e.user_id)}}})]):t._e()])})),0):a("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[a("small",[t._v("No se ha encontrado ningún miembro")])])])])])])},mt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"col-3 "},[a("input",{staticClass:"form-control inputsm",attrs:{type:"text",id:"inputFiltro",placeholder:"Filtrar..."}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("ID")]),a("th",[t._v("Name")])])])}],vt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("modal",{staticClass:"md",attrs:{name:"admin-add-okupa-modal",height:"auto",transition:"pop-out",scrollable:!0},on:{"before-open":t.beforeOpen}},[a("div",{staticClass:"card",staticStyle:{padding:"5%"}},[a("div",{staticClass:"card-body"},[a("label",{attrs:{for:"selectUsr"}},[a("strong",[t._v("Usuario ")])]),Object.keys(t.datos.users).length>0?a("select",{directives:[{name:"model",rawName:"v-model",value:t.selected,expression:"selected"}],staticClass:"col6 mx-4",attrs:{id:"selectUsr"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selected=e.target.multiple?a:a[0]}}},[a("option",{attrs:{disabled:""},domProps:{value:0}},[t._v("Seleccione un usuario")]),t._l(t.datos.users,(function(e,s){return a("option",{key:s,domProps:{value:e.user_id,textContent:t._s(e.full_name)}})}))],2):t._e(),a("div",{staticClass:"col-6 mx-auto"},[a("button",{staticClass:"btn btn-success",on:{click:function(e){t.clickOK(),t.clickClose()}}},[t._v("Añadir")]),a("button",{staticClass:"btn btn-danger",attrs:{"data-dismiss":"modal"},on:{click:function(e){return t.clickClose()}}},[t._v("Cancelar")])])])])])],1)},ht=[],ft={data:function(){return{selected:0}},mixins:[X],methods:{beforeOpen:function(t){this.activeOkupa=t.params.asoOkupa,this.load("users")},clickOK:function(){this.selected>0&&(this.$emit("addNewUser",this.selected),this.$modal.hide("admin-add-okupa-modal"))},clickClose:function(){this.$modal.hide("admin-add-okupa-modal")}}},gt=ft,_t=Object(T["a"])(gt,vt,ht,!1,null,null,null),bt=_t.exports,yt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("modal",{staticClass:"md",attrs:{name:"add-okupa-modal",transition:"pop-out",height:"auto",scrollable:!0}},[a("div",{staticClass:"card",staticStyle:{padding:"5%"}},[a("div",{staticClass:"card-body"},[a("form",[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"input-name"}},[a("strong",[t._v("Nombre ")])]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.input.name,expression:"input.name"}],staticClass:"form-control",attrs:{type:"text",id:"input-name",placeholder:"Name"},domProps:{value:t.input.name},on:{input:function(e){e.target.composing||t.$set(t.input,"name",e.target.value)}}}),a("label",{attrs:{for:"input-message"}},[a("strong",[t._v("Descripción ")])]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.input.description,expression:"input.description"}],staticClass:"form-control",attrs:{name:"description",type:"text",id:"input-message",placeholder:"Description"},domProps:{value:t.input.description},on:{input:function(e){e.target.composing||t.$set(t.input,"description",e.target.value)}}})])]),a("div",{staticClass:"col-6 mx-auto"},[a("button",{staticClass:"btn btn-success",on:{click:function(e){t.clickOK({name:t.input.name,description:t.input.description},"post","okupas",!0),t.clickClose("add-okupa-modal")}}},[t._v("Añadir")]),a("button",{staticClass:"btn btn-danger",attrs:{"data-dismiss":"modal"},on:{click:function(e){return t.clickClose("add-okupa-modal")}}},[t._v("Cancelar")])])])])])],1)},Ct=[],wt={data:function(){return{input:{name:"",description:""}}},mixins:[Y]},kt=wt,Ot=Object(T["a"])(kt,yt,Ct,!1,null,null,null),xt=Ot.exports,Et=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("modal",{staticClass:"md",attrs:{name:"edit-okupa-modal",transition:"pop-out",height:"auto",scrollable:!0},on:{"before-open":t.beforeOpen}},[a("div",{staticClass:"card",staticStyle:{padding:"5%"}},[a("div",{staticClass:"card-body"},[a("form",[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"input-name"}},[a("strong",[t._v("Nombre ")])]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.input.name,expression:"input.name"}],staticClass:"form-control",attrs:{type:"text",id:"input-name",placeholder:"Name"},domProps:{value:t.input.name},on:{input:function(e){e.target.composing||t.$set(t.input,"name",e.target.value)}}}),a("label",{attrs:{for:"input-message"}},[a("strong",[t._v("Descripción ")])]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.input.description,expression:"input.description"}],staticClass:"form-control",attrs:{name:"description",type:"text",id:"input-message",placeholder:"Description"},domProps:{value:t.input.description},on:{input:function(e){e.target.composing||t.$set(t.input,"description",e.target.value)}}})])]),a("div",{staticClass:"col-6 mx-auto"},[a("button",{staticClass:"btn btn-success",on:{click:function(e){t.clickOK({name:t.input.name,description:t.input.description},"put","okupas/"+t.input.id,!1),t.clickClose("edit-okupa-modal")}}},[t._v("Guardar")]),a("button",{staticClass:"btn btn-danger",attrs:{"data-dismiss":"modal"},on:{click:function(e){return t.clickClose("edit-okupa-modal")}}},[t._v("Cancelar")])])])])])],1)},Nt=[],$t={data:function(){return{input:{id:0,name:"",description:""}}},mixins:[Y],methods:{beforeOpen:function(t){this.input.id=t.params.usedOkupa.okupa_id,this.input.name=t.params.usedOkupa.name,this.input.description=t.params.usedOkupa.description}}},Pt=$t,Tt=Object(T["a"])(Pt,Et,Nt,!1,null,"142426ad",null),St=Tt.exports,At={data:function(){return{role:"",okupasdata:"",miembrosdata:[],activeOkupa:0,adminUser:0}},mixins:[X],components:{AddOkupa:xt,EditOkupa:St,AdminAddOkupa:bt},mounted:function(){this.role=this.$store.getters.getRole,this.user_id=this.$store.getters.getUserID,this.loading=!0,this.load("okupas"),rt()("#inputFiltro").on("keyup",(function(){var t=rt()(this).val().toLowerCase();rt()("#listOkupa .filter").filter((function(){rt()(this).toggle(rt()(this).text().toLowerCase().indexOf(t)>-1)}))}))},methods:{addNewUserFunc:function(t){this.adminUser=t,this.addMember()},addOkupa:function(){this.$modal.show("add-okupa-modal")},getokupa:function(t){var e=this,a="http://localhost:4444/okupas/"+t;W.a.get(a).then((function(t){e.okupasdata=t.data})).catch((function(t){console.log(t)}))},getmembers:function(t){var e=this;this.activeOkupa=t;var a="http://localhost:4444/okupas/users/"+t;W.a.get(a).then((function(t){e.miembrosdata=t.data})).catch((function(t){console.log(t)}))},delMember:function(t){var e=this,a=confirm("¿Estás seguro de querer borrarlo?");if(a&&""!=this.okupasdata){var s="http://localhost:4444/okupas/"+this.activeOkupa+"/"+t;W.a.delete(s).then((function(t){console.log("Usuario borrado | "+t.data),e.getmembers(e.activeOkupa)})).catch((function(t){console.log(t)}))}else a&&alert("No se ha podido borrar el usuario")},editOkupa:function(){this.$modal.show("edit-okupa-modal",{usedOkupa:this.okupasdata})},deleteOkupa:function(){var t=confirm("¿Estás seguro de querer borrarlo?");t&&W()({method:"delete",url:"http://localhost:4444/okupas/"+this.activeOkupa}).then((function(t){console.log(t),location.reload(!1),alert("Borrado!")})).catch((function(t){console.log("ERROR: "+t)}))},adminAddMember:function(){this.$modal.show("admin-add-okupa-modal",{asoOkupa:this.activeOkupa})},addMember:function(){var t=this;if(""!=this.okupasdata){var e=this.user_id;"admin"==this.role&&(e=this.adminUser);var a="http://localhost:4444/okupas/"+this.activeOkupa+"/"+e;W.a.post(a).then((function(e){console.log("Usuario añadido ",e.data),t.getmembers(t.activeOkupa)})).catch((function(t){console.log(t)}))}else alert("No hay asociación donde añadir el usuario")}}},It=At,Ut=Object(T["a"])(It,pt,mt,!1,null,null,null),jt=Ut.exports,Dt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row",attrs:{id:"owners"}},[a("div",{staticClass:"col-lg-6 col-md-12 col-xl-6"},[a("div",{staticStyle:{margin:"10px"}},[a("div",{staticClass:"card-title row"},[a("h3",{staticClass:"col-8"},[t._v(" Propietarios")]),t._m(0),"admin"==t.role?a("i",{staticClass:" fa fa-plus",staticStyle:{"line-height":"inherit",color:"green",margin:"7px"},attrs:{title:"Añadir"},on:{click:t.addOwner}}):t._e()]),a("AddOwner"),t.loading?a("div",{staticClass:"spinner-border text-dark"}):a("div",[Object.keys(t.datos.owners).length>0?a("div",[a("table",{staticClass:"table table-striped  ",attrs:{id:"listOwner"}},[t._m(1),a("tbody",t._l(t.datos.owners,(function(e,s){return a("tr",{key:s,staticClass:"filter",on:{click:function(a){return t.getowner(e.owner_id)}}},[a("td",[t._v(t._s(e.owner_id))]),a("td",[t._v(t._s(e.name))]),a("td",[t._v(t._s(e.type_owner))])])})),0)])]):a("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[t._v(" No hay ningún propietario ")])])],1)]),a("div",{staticClass:"col-12 col-md-6"},[a("div",{staticClass:"card h-100"},[a("div",{staticClass:"card-body"},["admin"==t.role&&""!=t.ownersdata?a("div",{staticClass:"row card-title"},[a("h5",{staticClass:"col-9 "},[t._v("Propietario")]),a("i",{staticClass:"col-1 fas fa-edit",staticStyle:{"line-height":"inherit"},attrs:{title:"Editar"},on:{click:t.editOwner}}),a("i",{staticClass:"col-1 fas fa-trash-alt",staticStyle:{"line-height":"inherit"},attrs:{title:"Borrar"},on:{click:t.deleteOwner}})]):a("div",{staticClass:"card-title"},[a("h5",[t._v("Propietario")])]),a("EditOwner"),""!=t.ownersdata?a("div",{attrs:{align:"left"}},[a("p",{staticClass:"card-text"},[a("small",[a("strong",[t._v("Id propietario: ")]),t._v(t._s(t.ownersdata.owner_id))])]),a("p",{staticClass:"card-text"},[a("small",[a("strong",[t._v("Nombre: ")]),t._v(t._s(t.ownersdata.name))])]),a("p",{staticClass:"card-text"},[a("small",[a("strong",[t._v("Tipo: ")]),t._v(t._s(t.ownersdata.type_owner))])]),a("p",{staticClass:"card-text"},[a("small",[a("strong",[t._v("Descripción: ")]),t._v(" "+t._s(t.ownersdata.description))])]),a("p",{staticClass:"card-text"},[a("small",[a("strong",[t._v("Fecha registro: ")]),t._v(t._s(t.ownersdata.created))])])]):a("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[a("small",[t._v("Ningun propietario seleccionado")])])],1)])])])},Rt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"col-3 "},[a("input",{staticClass:"form-control inputsm",attrs:{type:"text",id:"inputFiltro",placeholder:"Filtrar..."}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("ID")]),a("th",[t._v("Name")]),a("th",[t._v("Type")])])])}],Bt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("modal",{staticClass:"md",attrs:{name:"add-owner-modal",transition:"pop-out",height:"auto",scrollable:!0}},[a("div",{staticClass:"card",staticStyle:{padding:"5%"}},[a("div",{staticClass:"card-body"},[a("form",[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"input-name"}},[a("strong",[t._v("Nombre ")])]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.input.name,expression:"input.name"}],staticClass:"form-control",attrs:{type:"text",id:"input-name",placeholder:"Name"},domProps:{value:t.input.name},on:{input:function(e){e.target.composing||t.$set(t.input,"name",e.target.value)}}}),a("label",{attrs:{for:"input-type"}},[a("strong",[t._v("Tipo ")])]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.input.type,expression:"input.type"}],staticClass:"form-control col-6",attrs:{type:"text",id:"input-type",placeholder:"Type"},domProps:{value:t.input.type},on:{input:function(e){e.target.composing||t.$set(t.input,"type",e.target.value)}}}),a("label",{attrs:{for:"input-message"}},[a("strong",[t._v("Descripción ")])]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.input.description,expression:"input.description"}],staticClass:"form-control",attrs:{name:"description",type:"text",id:"input-message",placeholder:"Description"},domProps:{value:t.input.description},on:{input:function(e){e.target.composing||t.$set(t.input,"description",e.target.value)}}})])]),a("div",{staticClass:"col-6 mx-auto"},[a("button",{staticClass:"btn btn-success",on:{click:function(e){t.clickOK({name:t.input.name,type_owner:t.input.type,description:t.input.description},"post","owners",!0),t.clickClose("add-owner-modal")}}},[t._v("Añadir")]),a("button",{staticClass:"btn btn-danger",attrs:{"data-dismiss":"modal"},on:{click:function(e){return t.clickClose("add-owner-modal")}}},[t._v("Cancelar")])])])])])],1)},Mt=[],Jt={data:function(){return{input:{name:"",type:"",description:""}}},mixins:[Y]},Lt=Jt,Ft=Object(T["a"])(Lt,Bt,Mt,!1,null,null,null),qt=Ft.exports,Kt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("modal",{staticClass:"md",attrs:{name:"edit-owner-modal",transition:"pop-out",height:"auto",scrollable:!0},on:{"before-open":t.beforeOpen}},[a("div",{staticClass:"card",staticStyle:{padding:"5%"}},[a("div",{staticClass:"card-body"},[a("form",[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"input-name"}},[a("strong",[t._v("Nombre ")])]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.input.name,expression:"input.name"}],staticClass:"form-control",attrs:{type:"text",id:"input-name",placeholder:"Name"},domProps:{value:t.input.name},on:{input:function(e){e.target.composing||t.$set(t.input,"name",e.target.value)}}}),a("label",{attrs:{for:"input-type"}},[a("strong",[t._v("Tipo ")])]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.input.type,expression:"input.type"}],staticClass:"col-6 form-control",attrs:{type:"text",id:"input-type",placeholder:"Type"},domProps:{value:t.input.type},on:{input:function(e){e.target.composing||t.$set(t.input,"type",e.target.value)}}}),a("label",{attrs:{for:"input-message"}},[a("strong",[t._v("Descripción ")])]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.input.description,expression:"input.description"}],staticClass:"form-control",attrs:{name:"description",type:"text",id:"input-message",placeholder:"Description"},domProps:{value:t.input.description},on:{input:function(e){e.target.composing||t.$set(t.input,"description",e.target.value)}}})])]),a("div",{staticClass:"mx-auto col-6"},[a("button",{staticClass:"btn btn-success",on:{click:function(e){t.clickOK({name:t.input.name,type_owner:t.input.type,description:t.input.description},"put","owners/"+t.input.id,!1),t.clickClose("edit-owner-modal")}}},[t._v("Guardar")]),a("button",{staticClass:"btn btn-danger",attrs:{"data-dismiss":"modal"},on:{click:function(e){return t.clickClose("edit-owner-modal")}}},[t._v("Cancelar")])])])])])],1)},Gt=[],zt={data:function(){return{input:{id:0,name:"",type:"",description:""}}},mixins:[Y],methods:{beforeOpen:function(t){this.input.id=t.params.usedOwner.owner_id,this.input.name=t.params.usedOwner.name,this.input.type=t.params.usedOwner.type_owner,this.input.description=t.params.usedOwner.description}}},Vt=zt,Zt=Object(T["a"])(Vt,Kt,Gt,!1,null,null,null),Ht=Zt.exports,Qt={data:function(){return{role:"",ownersdata:"",activeOwner:0}},mixins:[X],components:{AddOwner:qt,EditOwner:Ht},mounted:function(){this.role=this.$store.getters.getRole,this.user_id=this.$store.getters.getUserID,this.loading=!0,this.load("owners"),rt()("#inputFiltro").on("keyup",(function(){var t=rt()(this).val().toLowerCase();rt()("#listOwner .filter").filter((function(){rt()(this).toggle(rt()(this).text().toLowerCase().indexOf(t)>-1)}))}))},methods:{addOwner:function(){this.$modal.show("add-owner-modal")},getowner:function(t){var e=this;this.activeOwner=t;var a="http://localhost:4444/owners/"+t;W.a.get(a).then((function(t){e.ownersdata=t.data})).catch((function(t){console.log(t)}))},editOwner:function(){this.$modal.show("edit-owner-modal",{usedOwner:this.ownersdata})},deleteOwner:function(){var t=confirm("¿Estás seguro de querer borrarlo?");t&&W()({method:"delete",url:"http://localhost:4444/owners/"+this.activeOwner}).then((function(t){console.log(t),location.reload(!1),alert("Borrado!")})).catch((function(t){console.log("ERROR: "+t)}))}}},Wt=Qt,Xt=Object(T["a"])(Wt,Dt,Rt,!1,null,null,null),Yt=Xt.exports,te=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row",attrs:{id:"properties"}},[a("div",{staticClass:"col-lg-6 col-md-12 col-xl-6"},[a("div",{staticStyle:{margin:"10px"}},[a("div",{staticClass:"card-title row"},[a("h3",{staticClass:"col-8"},[t._v(" Propiedades")]),t._m(0),"admin"==t.role?a("router-link",{attrs:{to:"/addproperties"}},[a("i",{staticClass:"fa fa-plus",staticStyle:{"line-height":"inherit",color:"green",margin:"7px"},attrs:{title:"Añadir"}})]):t._e()],1),t.loading?a("div",{staticClass:"spinner-border text-dark"}):a("div",[Object.keys(t.datos.properties).length>0&&Object.keys(t.datos.owners).length>0&&Object.keys(t.datos.okupas).length>0?a("div",[a("table",{staticClass:"table table-striped  ",attrs:{id:"listProperty"}},[t._m(1),a("tbody",t._l(t.datos.properties,(function(e,s){return a("tr",{key:s,staticClass:"filter",on:{click:function(a){return t.getproperty(e.property_id)}}},[a("td",[t._v(t._s(e.property_id))]),a("td",[t._v(t._s(t.datos.okupas[e.okupa_id].name))]),a("td",[t._v(t._s(t.datos.owners[e.owner_id].name)+" ")]),a("td",[t._v(t._s(e.type))]),a("td",[t._v(t._s(e.description))])])})),0)])]):a("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[t._v(" No hay propiedades registradas ")])])])]),a("div",{staticClass:"col-lg-3 col-md-6 col-xl-3"},[a("div",{staticClass:"card h-100 "},[a("div",{staticClass:"card-body"},["admin"==t.role&&""!=t.propertydata?a("div",{staticClass:"row card-title"},[a("h5",{staticClass:"col-9 "},[t._v("Propiedad")]),a("i",{staticClass:"col-1 fas fa-edit",staticStyle:{"line-height":"inherit"},attrs:{title:"Editar"},on:{click:t.AdminEditProperty}}),a("i",{staticClass:"col-1 fas fa-trash-alt",staticStyle:{"line-height":"inherit"},attrs:{title:"Borrar"},on:{click:function(e){return t.deleteProperty(t.propertydata.property_id)}}}),a("AdminEditProperty")],1):a("div",{staticClass:"card-title"},[a("h5",[t._v("Propiedad")])]),""!=t.propertydata?a("div",{attrs:{align:"left"}},[a("p",{staticClass:"card-text"},[a("small",[a("strong",[t._v("Id propiedad: ")]),t._v(t._s(t.propertydata.property_id))])]),a("p",{staticClass:"card-text"},[a("small",[a("strong",[t._v("Propietario: ")]),t._v(t._s(t.theOwner.name))])]),a("p",{staticClass:"card-text"},[a("small",[a("strong",[t._v("Asociación: ")]),t._v(t._s(t.theOkupa.name))])]),a("p",{staticClass:"card-text"},[a("small",[a("strong",[t._v("Descripción: ")]),t._v(" "+t._s(t.propertydata.description))])]),a("p",{staticClass:"card-text"},[a("small",[a("strong",[t._v("Tipo: ")]),t._v(t._s(t.propertydata.type))])]),a("p",{staticClass:"card-text"},[a("small",[a("strong",[t._v("Fecha registro: ")]),t._v(t._s(t.propertydata.created))])])]):a("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[a("small",[t._v("Ninguna propiedad seleccionada")])])])])]),a("div",{staticClass:"col-lg-3 col-md-6 col-xl-3"},[a("div",{staticClass:"card h-100"},[a("div",{staticClass:"card-body"},["admin"==t.role&&""!=t.propertydata?a("div",{staticClass:"row card-title"},[a("h5",{staticClass:"col-12 "},[t._v("Dirección")])]):a("div",{staticClass:"card-title"},[a("h5",[t._v("Dirección")])]),""!=t.propertydata?a("div",{attrs:{align:"left"}},[a("p",{staticClass:"card-text"},[a("small",[a("strong",[t._v("Calle: ")]),t._v(t._s(t.propertydata.calle))])]),a("div",{staticClass:"card-text ",attrs:{align:"left"}},[a("p",[a("small",[a("strong",[t._v("Número: ")]),t._v(t._s(t.propertydata.numero))]),a("small",{staticClass:"ml-3"},[a("strong",[t._v(" Piso: ")]),t._v(t._s(t.propertydata.piso)),a("strong",[t._v("º ")]),t._v(t._s(t.propertydata.puerta))])])]),a("p",{staticClass:"card-text"},[a("small",[a("strong",[t._v("CP: ")]),t._v(t._s(t.propertydata.codigo_postal))])]),a("p",{staticClass:"card-text"},[a("small",[a("strong",[t._v("Núcleo: ")]),t._v(" "+t._s(t.propertydata.nucleo))])]),a("p",{staticClass:"card-text"},[a("small",[a("strong",[t._v("Población: ")]),t._v(t._s(t.propertydata.poblacion))])]),a("p",{staticClass:"card-text"},[a("small",[a("strong",[t._v("Municipio: ")]),t._v(t._s(t.propertydata.municipio))])]),a("p",{staticClass:"card-text"},[a("small",[a("strong",[t._v("Provincia: ")]),t._v(t._s(t.propertydata.provincia))])]),a("p",{staticClass:"card-text"},[a("small",[a("strong",[t._v("Comunidad: ")]),t._v(t._s(t.propertydata.comunidad))])])]):a("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[a("small",[t._v("Ninguna propiedad seleccionada")])])])])])])},ee=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"col-3 "},[a("input",{staticClass:"form-control inputsm",attrs:{type:"text",id:"inputFiltro",placeholder:"Filtrar..."}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("ID")]),a("th",[t._v("Okupa")]),a("th",[t._v("Owner")]),a("th",[t._v("Type")]),a("th",[t._v("Description")])])])}],ae=(a("3ca3"),a("ddb0"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("modal",{staticClass:"md",attrs:{name:"edit-property-modal",transition:"pop-out",height:"auto",scrollable:!0},on:{"before-open":t.beforeOpen}},[a("div",{staticClass:"card",staticStyle:{padding:"5%"}},[a("div",{staticClass:"card-body"},[a("form",{attrs:{autocomplete:"off"}},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"selectOwn"}},[a("strong",[t._v("Propietario ")])]),Object.keys(t.datos.owners).length>0?a("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedOwner,expression:"selectedOwner"}],staticClass:"col-6 mx-4",attrs:{id:"selectOwn"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selectedOwner=e.target.multiple?a:a[0]}}},t._l(t.datos.owners,(function(e,s){return a("option",{key:s,domProps:{value:e.owner_id,textContent:t._s(e.name)}})})),0):t._e(),a("div",{staticClass:"col-3"}),a("label",{attrs:{for:"selectAso"}},[a("strong",[t._v("Asociación ")])]),Object.keys(t.datos.okupas).length>0?a("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedOkupa,expression:"selectedOkupa"}],staticClass:"mx-4 col-6",attrs:{id:"selectAso"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selectedOkupa=e.target.multiple?a:a[0]}}},t._l(t.datos.okupas,(function(e,s){return a("option",{key:s,domProps:{value:e.okupa_id,textContent:t._s(e.name)}})})),0):t._e(),a("div",{staticClass:"col-3"}),a("label",{attrs:{for:"select_typ"}},[a("strong",[t._v("Tipo ")])]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedType,expression:"selectedType"}],staticClass:"mx-4 col-4",attrs:{id:"select_typ"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selectedType=e.target.multiple?a:a[0]}}},[a("option",{attrs:{disabled:"",hidden:""},domProps:{value:t.input.type}},[t._v(" "+t._s(t.input.type)+" ")]),a("option",{attrs:{value:"estudio"}},[t._v("Estudio")]),a("option",{attrs:{value:"chalet"}},[t._v("Chalet")]),a("option",{attrs:{value:"chalet adosado"}},[t._v("Chalet adosado")]),a("option",{attrs:{value:"piso"}},[t._v("Piso")]),a("option",{attrs:{value:"local"}},[t._v("Local")]),a("option",{attrs:{value:"otro"}},[t._v("Otro")])]),a("div",{staticClass:"col-3"}),a("label",{attrs:{for:"input-message"}},[a("strong",[t._v("Descripción ")])]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.input.description,expression:"input.description"}],staticClass:"form-control",attrs:{name:"description",type:"text",id:"input-message",placeholder:"Description"},domProps:{value:t.input.description},on:{input:function(e){e.target.composing||t.$set(t.input,"description",e.target.value)}}})])]),a("div",{staticClass:"mx-auto col-6"},[0!=t.selectedType&&0!=t.selectedOwner&&0!=t.selectedOkupa?a("button",{staticClass:"btn btn-success",on:{click:function(e){t.clickOK({type:t.selectedType,description:t.input.description,owner_id:t.selectedOwner,okupa_id:t.selectedOkupa},"put","properties/"+t.input.property_id,!1),t.$modal.hide("edit-property-modal"),t.clean()}}},[t._v("Guardar")]):a("button",{staticClass:"btn btn-success",attrs:{disabled:""}},[t._v("Guardar")]),a("button",{staticClass:"btn btn-danger",attrs:{"data-dismiss":"modal"},on:{click:function(e){t.$modal.hide("edit-property-modal"),t.clean()}}},[t._v("Cancelar")])])])])])],1)}),se=[],oe={data:function(){return{selectedOwner:0,selectedOkupa:0,selectedType:0,input:{}}},mixins:[Y,X],methods:{clean:function(){this.selectedOwner=0,this.selectedOkupa=0,this.selectedType=0},beforeOpen:function(t){this.input=t.params.usedProperty,this.selectedType=this.input.type,this.selectedOkupa=this.input.okupa_id,this.selectedOwner=this.input.owner_id,this.load("owners"),this.load("okupas")}}},ne=oe,ie=Object(T["a"])(ne,ae,se,!1,null,null,null),re=ie.exports,le={data:function(){return{list:{okupa:[],owner:[]},role:"",propertydata:"",theOwner:"",theOkupa:""}},mixins:[X],components:{AdminEditProperty:re},mounted:function(){this.role=this.$store.getters.getRole,this.user_id=this.$store.getters.getUserID,this.loading=!0,this.loadProperties(),rt()("#inputFiltro").on("keyup",(function(){var t=rt()(this).val().toLowerCase();rt()("#listProperty .filter").filter((function(){rt()(this).toggle(rt()(this).text().toLowerCase().indexOf(t)>-1)}))}))},methods:{loadProperties:function(){var t=this,e="http://localhost:4444/properties",a="",s="";W.a.get(e).then((function(e){t.datos["properties"]=e.data;for(var o=[],n=[],i=0;i<t.datos["properties"].length;i++){a=t.datos["properties"][i].okupa_id;var r="http://localhost:4444/okupas/"+a;o.push(W.a.get(r).then((function(e){var a=e.data.okupa_id;t.list.okupa[a]=e.data})).catch((function(t){console.log(t)}))),s=t.datos["properties"][i].owner_id;var l="http://localhost:4444/owners/"+s;n.push(W.a.get(l).then((function(e){var a=e.data.owner_id;t.list.owner[a]=e.data})).catch((function(t){console.log(t)})))}Promise.all(o).then((function(){t.datos.okupas=t.list.okupa})),Promise.all(n).then((function(){t.datos.owners=t.list.owner,t.loading=!1}))})).catch((function(t){console.log(t)}))},AdminEditProperty:function(){this.$modal.show("edit-property-modal",{usedProperty:this.propertydata})},getproperty:function(t){var e=this,a="http://localhost:4444/properties/"+t;W.a.get(a).then((function(t){e.propertydata=t.data,e.getOwner(e.propertydata.owner_id),e.getOkupa(e.propertydata.okupa_id)})).catch((function(t){console.log(t)}))},getOwner:function(t){var e=this,a="http://localhost:4444/owners/"+t;return W.a.get(a).then((function(t){e.theOwner=t.data})).catch((function(t){console.log("Error leyendo usuario:"+t)})),this.theOwner},getOkupa:function(t){var e=this,a="http://localhost:4444/okupas/"+t;return W.a.get(a).then((function(t){e.theOkupa=t.data})).catch((function(t){console.log("Error leyendo usuario:"+t)})),this.theOkupa},deleteProperty:function(t){var e=confirm("¿Estás seguro de querer borrarla?");e&&W()({method:"delete",url:"http://localhost:4444/properties/"+t}).then((function(t){console.log(t),location.reload(!1),alert("Borrado!")})).catch((function(t){console.log("ERROR: "+t)}))}}},ce=le,ue=Object(T["a"])(ce,te,ee,!1,null,null,null),de=ue.exports,pe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container",attrs:{id:"properties"}},[a("div",{staticClass:"row",attrs:{align:"left"}},[a("div",{staticClass:"col-lg-6 col-md-12"},[a("h3",[t._v("Datos")]),a("table",[a("tr",[t._m(0),a("td",[a("select",{directives:[{name:"model",rawName:"v-model",value:t.resultado.owner_id,expression:"resultado.owner_id"}],attrs:{id:"select_propietario"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.resultado,"owner_id",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"0",disabled:"",selected:""}},[t._v("Escoge uno...")]),t._l(t.datos.owners,(function(e,s){return a("option",{key:s,domProps:{value:e.owner_id}},[t._v(t._s(e.name))])}))],2)])]),a("tr",[t._m(1),a("td",[a("select",{directives:[{name:"model",rawName:"v-model",value:t.resultado.okupa_id,expression:"resultado.okupa_id"}],attrs:{id:"select_okupa"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.resultado,"okupa_id",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"0",disabled:"",selected:""}},[t._v("Escoge una...")]),t._l(t.datos.okupas,(function(e,s){return a("option",{key:s,domProps:{value:e.okupa_id}},[t._v(t._s(e.name))])}))],2)])]),a("tr",[t._m(2),a("td",[a("select",{directives:[{name:"model",rawName:"v-model",value:t.resultado.type,expression:"resultado.type"}],attrs:{id:"select_typ"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.resultado,"type",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"0",disabled:"",selected:""}},[t._v("Escoge uno...")]),a("option",{attrs:{value:"estudio"}},[t._v("Estudio")]),a("option",{attrs:{value:"chalet"}},[t._v("Chalet")]),a("option",{attrs:{value:"chalet adosado"}},[t._v("Chalet adosado")]),a("option",{attrs:{value:"piso"}},[t._v("Piso")]),a("option",{attrs:{value:"local"}},[t._v("Local")]),a("option",{attrs:{value:"otro"}},[t._v("Otro")])])])]),a("tr",[t._m(3),a("td",[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.resultado.description,expression:"resultado.description"}],attrs:{placeholder:"Añade una descripción...",name:"prop_descripcion",rows:"5",cols:"30",minlength:"3",maxlength:"200"},domProps:{value:t.resultado.description},on:{input:function(e){e.target.composing||t.$set(t.resultado,"description",e.target.value)}}})])])]),t.resultado.owner_id>0&&t.resultado.user_id>0&&t.resultado.okupa_id>0&&Object.keys(t.resultado.description).length>2&&Object.keys(t.resultado.type).length>0?a("div",[t._m(4)]):a("div",[t._m(5)])]),a("div",{staticClass:"col-lg-6 col-md-12",attrs:{id:"div_address"}},[a("h3",[t._v("Dirección")]),a("table",[a("tr",[t._m(6),a("td",[a("select",{directives:[{name:"model",rawName:"v-model",value:t.selectThis.com,expression:"selectThis.com"}],attrs:{disabled:"",id:"select_com"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.selectThis,"com",e.target.multiple?a:a[0])},function(e){return t.get_provincias()}]}},[a("option",{attrs:{value:"0",disabled:"",selected:""}},[t._v("Escoge una...")]),t._l(t.comunidades,(function(e,s){return a("option",{key:s,domProps:{value:e.CCOM}},[t._v(t._s(e.COM))])}))],2)])]),a("tr",[t._m(7),a("td",[a("select",{directives:[{name:"model",rawName:"v-model",value:t.selectThis.pro,expression:"selectThis.pro"}],attrs:{disabled:"",id:"select_pro"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.selectThis,"pro",e.target.multiple?a:a[0])},function(e){return t.get_municipios()}]}},[a("option",{attrs:{value:"0",disabled:"",selected:""}},[t._v("Escoge una...")]),t._l(t.provincias,(function(e,s){return a("option",{key:s,domProps:{value:e.CPRO}},[t._v(t._s(e.PRO))])}))],2)])]),a("tr",[t._m(8),a("td",[a("select",{directives:[{name:"model",rawName:"v-model",value:t.selectThis.mun,expression:"selectThis.mun"}],attrs:{disabled:"",id:"select_mun"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.selectThis,"mun",e.target.multiple?a:a[0])},function(e){return t.get_poblaciones()}]}},[a("option",{attrs:{value:"0",disabled:"",selected:""}},[t._v("Escoge uno...")]),t._l(t.municipios,(function(e,s){return a("option",{key:s,domProps:{value:e.CMUM}},[t._v(t._s(e.DMUN50))])}))],2)])]),a("tr",[t._m(9),a("td",[a("select",{directives:[{name:"model",rawName:"v-model",value:t.selectThis.pob,expression:"selectThis.pob"}],attrs:{disabled:"",id:"select_pob"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.selectThis,"pob",e.target.multiple?a:a[0])},function(e){return t.get_nucleos()}]}},[a("option",{attrs:{value:"0",disabled:"",selected:""}},[t._v("Escoge una...")]),t._l(t.poblaciones,(function(e,s){return a("option",{key:s,domProps:{value:e.NENTSI50}},[t._v(t._s(e.NENTSI50))])}))],2)])]),a("tr",[t._m(10),a("td",[a("select",{directives:[{name:"model",rawName:"v-model",value:t.selectThis.nuc,expression:"selectThis.nuc"}],attrs:{disabled:"",id:"select_nuc"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.selectThis,"nuc",e.target.multiple?a:a[0])},function(e){return t.get_CPs()}]}},[a("option",{attrs:{value:"0",disabled:"",selected:""}},[t._v("Escoge una...")]),t._l(t.nucleos,(function(e,s){return a("option",{key:s,domProps:{value:e.CUN}},[t._v(t._s(e.NNUCLE50))])}))],2)])]),a("tr",[t._m(11),a("td",[a("select",{directives:[{name:"model",rawName:"v-model",value:t.selectThis.CPs,expression:"selectThis.CPs"}],attrs:{disabled:"",id:"select_cps"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.selectThis,"CPs",e.target.multiple?a:a[0])},function(e){return t.get_calles()}]}},[a("option",{attrs:{value:"0",disabled:"",selected:""}},[t._v("Escoge uno...")]),t._l(t.codigosPostal,(function(e,s){return a("option",{key:s,domProps:{value:e.CPOS}},[t._v(t._s(e.CPOS))])}))],2)])]),a("tr",[t._m(12),a("td",[a("select",{directives:[{name:"model",rawName:"v-model",value:t.selectThis.cal,expression:"selectThis.cal"}],attrs:{disabled:"",id:"select_cal"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.selectThis,"cal",e.target.multiple?a:a[0])},function(e){return t.get_end()}]}},[a("option",{attrs:{value:"0",disabled:"",selected:""}},[t._v("Escoge una...")]),t._l(t.calles,(function(e,s){return a("option",{key:s,domProps:{value:e.CVIA}},[t._v(t._s(e.TVIA+" "+e.NVIAC))])}))],2)])])]),a("div",{},[a("label",{attrs:{for:"num"}},[t._v("Número")]),a("input",{staticStyle:{width:"60px","text-align":"center"},attrs:{disabled:"",type:"number",id:"num"},on:{change:function(e){return t.get_number(e.target.value)}}}),a("label",{attrs:{for:"piso"}},[t._v("Piso")]),a("input",{staticStyle:{width:"60px","text-align":"center"},attrs:{disabled:"",type:"number",id:"piso"},on:{change:function(e){return t.get_floor(e.target.value)}}}),a("label",{attrs:{for:"puerta"}},[t._v("Puerta")]),a("input",{staticStyle:{width:"60px","text-align":"center","text-transform":"uppercase"},attrs:{maxlength:"1",disabled:"",id:"puerta"},on:{change:function(e){return t.get_door(e.target.value)}}})]),a("div",[a("button",{staticClass:"btn btn-success",attrs:{id:"btn_add"},on:{click:function(e){return t.comprobate()}}},[t._v("Añadir")]),a("router-link",{staticClass:"btn btn-danger",staticStyle:{margin:"10px"},attrs:{to:"/properties"}},[t._v("Cancelar")])],1)])])])},me=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",[a("label",{attrs:{for:"select_propietario"}},[t._v("Propietario ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",[a("label",{attrs:{for:"select_okupa"}},[t._v("Asociación ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",[a("label",{attrs:{for:"select_typ"}},[t._v("Tipo ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",[a("label",{attrs:{for:"prop_descripcion"}},[t._v("Descripción ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[t._v("Añadir dirección"),a("button",{staticClass:"btn btn-success",attrs:{onclick:"document.getElementById('select_com').removeAttribute('disabled');"}},[t._v("Añadir")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[t._v("Añadir dirección"),a("button",{staticClass:"btn btn-success",attrs:{disabled:""}},[t._v("Añadir")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",[a("label",{attrs:{for:"select_com"}},[t._v("Comunidad ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",[a("label",{attrs:{for:"select_pro"}},[t._v("Provincia ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",[a("label",{attrs:{for:"select_mun"}},[t._v("Municipio ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",[a("label",{attrs:{for:"select_pob"}},[t._v("Población ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",[a("label",{attrs:{for:"select_nuc"}},[t._v("Núcleo ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",[a("label",{attrs:{for:"select_cps"}},[t._v("Código Postal ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",[a("label",{attrs:{for:"select_cal"}},[t._v("Dirección ")])])}],ve={data:function(){return{selectThis:{com:"",pro:"",mun:"",pob:"",nuc:"",CPs:"",Cal:""},key:"2fbda50bcbdc4f0d5ff1b7f08546174f90e60e0de4cc83d2f4cab5ea2708a989",resultado:{owner_id:0,okupa_id:0,user_id:parseInt(this.$store.getters.getUserID),type:0,description:"",created:0,comunidad:"",provincia:"",municipio:"",poblacion:"",nucleo:"",codigo_postal:"",calle:"",numero:0,piso:0,puerta:""},comunidades:[],provincias:[],municipios:[],poblaciones:[],nucleos:[],codigosPostal:[],calles:[],instance:""}},mixins:[X],mounted:function(){this.get_comunidades(),this.load("okupas"),this.load("owners")},methods:{get_comunidades:function(){this.instance=W.a.create(),this.instance.interceptors.request.use((function(t){return t}),(function(t){return Promise.reject(t)}));var t=this,e="https://apiv1.geoapi.es/comunidades?type=JSON&key="+this.key+"&sandbox=0";this.instance.get(e).then((function(e){t.comunidades=JSON.parse(JSON.stringify(e.data.data))})).catch((function(t){console.log(t)}))},get_provincias:function(){document.getElementById("select_pro").removeAttribute("disabled");var t=this.selectThis.com;this.resultado.comunidad=document.getElementById("select_com").options[document.getElementById("select_com").selectedIndex].text;var e=this,a="https://apiv1.geoapi.es/provincias?CCOM="+t+"&type=JSON&key="+this.key+"&sandbox=0";this.instance.get(a).then((function(t){var a=JSON.stringify(t.data.data);e.provincias=JSON.parse(a)})).catch((function(t){console.log(t)}))},get_municipios:function(){var t=this.selectThis.pro;this.resultado.provincia=document.getElementById("select_pro").options[document.getElementById("select_pro").selectedIndex].text;var e=this,a="https://apiv1.geoapi.es/municipios?CPRO="+t+"&type=JSON&key="+this.key+"&sandbox=0";this.instance.get(a).then((function(t){document.getElementById("select_mun").removeAttribute("disabled"),e.municipios=JSON.parse(JSON.stringify(t.data.data))})).catch((function(t){console.log(t)}))},get_poblaciones:function(){var t=this.selectThis.pro,e=this.selectThis.mun;this.resultado.municipio=document.getElementById("select_mun").options[document.getElementById("select_mun").selectedIndex].text;var a=this,s="https://apiv1.geoapi.es/poblaciones?CPRO="+t+"&CMUM="+e+"&type=JSON&key="+this.key+"&sandbox=0";this.instance.get(s).then((function(t){document.getElementById("select_pob").removeAttribute("disabled"),a.poblaciones=JSON.parse(JSON.stringify(t.data.data))})).catch((function(t){console.log(t)}))},get_nucleos:function(){var t=this.selectThis.pro,e=this.selectThis.pob,a=this.selectThis.mun;this.resultado.poblacion=e;var s=this,o="https://apiv1.geoapi.es/nucleos?CPRO="+t+"&CMUM="+a+"&NENTSI50="+e+"&type=JSON&key="+this.key+"&sandbox=0";this.instance.get(o).then((function(t){document.getElementById("select_nuc").removeAttribute("disabled"),s.nucleos=JSON.parse(JSON.stringify(t.data.data))})).catch((function(t){console.log(t)}))},get_CPs:function(){var t=this.selectThis.pro,e=this.selectThis.nuc,a=this.selectThis.mun;this.resultado.nucleo=document.getElementById("select_nuc").options[document.getElementById("select_nuc").selectedIndex].text;var s=this,o="https://apiv1.geoapi.es/cps?CPRO="+t+"&CMUM="+a+"&CUN="+e+"&type=JSON&key="+this.key+"&sandbox=0";this.instance.get(o).then((function(t){document.getElementById("select_cps").removeAttribute("disabled"),s.codigosPostal=JSON.parse(JSON.stringify(t.data.data))})).catch((function(t){console.log(t)}))},get_calles:function(){var t=this.selectThis.pro,e=this.selectThis.nuc,a=this.selectThis.mun,s=this.selectThis.CPs;this.resultado.codigo_postal=s;var o=this,n="https://apiv1.geoapi.es/calles?CPRO="+t+"&CMUM="+a+"&CUN="+e+"&CPOS="+s+"&type=JSON&key="+this.key+"&sandbox=0";console.log(n),this.instance.get(n).then((function(t){document.getElementById("select_cal").removeAttribute("disabled"),o.calles=JSON.parse(JSON.stringify(t.data.data))})).catch((function(t){console.log(t)}))},get_end:function(){document.getElementById("num").removeAttribute("disabled"),document.getElementById("piso").removeAttribute("disabled"),document.getElementById("puerta").removeAttribute("disabled"),this.resultado.calle=document.getElementById("select_cal").options[document.getElementById("select_cal").selectedIndex].text},get_number:function(t){this.resultado.numero=parseInt(t)},get_floor:function(t){this.resultado.piso=parseInt(t)},get_door:function(t){this.resultado.puerta=t},comprobate:function(){for(var t in this.resultado)if(this.resultado[t].length<1&&"puerta"!=t)return document.getElementById("btn_add").setAttribute("class","btn btn-warning"),void setTimeout((function(){document.getElementById("btn_add").setAttribute("class","btn btn-success")}),500);var e=(new Date).getTime();this.resultado.created=new Date(e).toISOString();var a=this;W()({method:"post",url:"http://localhost:4444/properties",data:this.resultado}).then((function(t){console.log(t.data),alert("Creado"),a.$router.push("/properties")})).catch((function(t){console.log("ERROR: "+t)}))}}},he=ve,fe=(a("46c6"),Object(T["a"])(he,pe,me,!1,null,"a6129110",null)),ge=fe.exports,_e=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row "},[a("div",{staticClass:"col-lg-6 col-12 row"},[a("div",{staticClass:"mx-5 h-100 w-100"},[a("Login",{staticClass:"col-6"})],1)]),a("div",{staticClass:"col-12 col-lg-6 row"},[a("div",{staticClass:"mx-5 h-100 w-100"},[a("Signup",{staticClass:"col-6"})],1)])])},be=[],ye=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"login"}},[a("form",{staticClass:"form-group"},[a("h1",[t._v("Login")]),a("br"),a("input",{directives:[{name:"model",rawName:"v-model",value:t.input.username,expression:"input.username"}],staticClass:"form-control",attrs:{required:"",type:"email",autocomplete:"on",name:"username",placeholder:"Email"},domProps:{value:t.input.username},on:{input:function(e){e.target.composing||t.$set(t.input,"username",e.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.input.password,expression:"input.password"}],staticClass:"form-control",attrs:{type:"password",autocomplete:"on",name:"password",placeholder:"Password"},domProps:{value:t.input.password},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.login()},input:function(e){e.target.composing||t.$set(t.input,"password",e.target.value)}}}),a("button",{staticClass:"btn-sm btn-secondary",attrs:{type:"button"},on:{click:function(e){return t.login()}}},[t._v("Login")])]),a("transition",{attrs:{name:"fade"}},[t.show?a("div",[a("h6",[t._v(" "+t._s(t.showData))])]):t._e()])],1)},Ce=[],we={name:"Login",data:function(){return{input:{username:"",password:""},show:!1,showData:""}},methods:{testToast:function(t){var e=this;this.show=!0,this.showData=t,setTimeout((function(){e.show=!1,e.showData=""}),850)},login:function(){var t=this;if(""!=this.input.username&&""!=this.input.password){var e=JSON.stringify({username:this.input.username,password:this.input.password}),s=a("bc3a");s({method:"post",url:"http://localhost:4444/users/login",data:e}).then((function(e){t.$store.dispatch(c,e.data.role),t.$store.dispatch(u,e.data.token),t.$store.dispatch(d,e.data.user_id),t.$router.push("/").catch((function(t){console.log(t)}))})).catch((function(e){e.response?t.testToast("The username or password is incorrect"):t.testToast("Error: Network Error")}))}else this.testToast("Username and password must be present")}}},ke=we,Oe=(a("5f4c"),Object(T["a"])(ke,ye,Ce,!1,null,"1b7b9e2a",null)),xe=Oe.exports,Ee=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"signup"}},[a("form",{staticClass:"form-group"},[a("h1",[t._v("Sign up")]),a("br"),a("input",{directives:[{name:"model",rawName:"v-model",value:t.input.username,expression:"input.username"}],staticClass:"form-control",attrs:{type:"text",autocomplete:"on",name:"username",placeholder:"Email"},domProps:{value:t.input.username},on:{input:function(e){e.target.composing||t.$set(t.input,"username",e.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.input.fullname,expression:"input.fullname"}],staticClass:"form-control",attrs:{type:"text",name:"fullname",placeholder:"Fullname"},domProps:{value:t.input.fullname},on:{input:function(e){e.target.composing||t.$set(t.input,"fullname",e.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.input.password,expression:"input.password"}],staticClass:"form-control",attrs:{type:"password",autocomplete:"on",name:"password",placeholder:"Password"},domProps:{value:t.input.password},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.signup()},input:function(e){e.target.composing||t.$set(t.input,"password",e.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.input.password2,expression:"input.password2"}],staticClass:"form-control",attrs:{type:"password",autocomplete:"on",name:"password2",placeholder:"Repeat Password"},domProps:{value:t.input.password2},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.signup()},input:function(e){e.target.composing||t.$set(t.input,"password2",e.target.value)}}}),a("button",{staticClass:"btn-sm btn-secondary",attrs:{type:"button"},on:{click:function(e){return t.signup()}}},[t._v("Sign up")])]),a("transition",{attrs:{name:"fade"}},[t.show?a("div",[a("h6",[t._v(" "+t._s(t.showData))])]):t._e()])],1)},Ne=[],$e={name:"Signup",data:function(){return{input:{username:"",fullname:"",password:"",role:"user"},show:!1,showData:""}},methods:{testToast:function(t){var e=this;this.show=!0,this.showData=t,setTimeout((function(){e.show=!1,e.showData=""}),850)},signup:function(){if(""!=this.input.username&&""!=this.input.fullname&&""!=this.input.password)if(this.input.password==this.input.password2){var t=this,e=new Date;if(""!=this.input.username&&""!=this.input.fullname&&""!=this.input.password){var s=JSON.stringify({username:this.input.username,full_name:this.input.fullname,password:this.input.password,role:this.input.role,registered:e});console.log(s);var o=a("bc3a");o({method:"post",url:"http://localhost:4444/users",data:s}).then((function(e){console.log(e.data),t.testToast("User registered!"),setTimeout((function(){t.$router.push("/register")}),1500)})).catch((function(e){e.response?t.testToast("The username, fullname or password is incorrect"):t.testToast("Error: Network Error")}))}else this.testToast("A username, fullname and password must be present")}else this.testToast("The two password fields don't match");else this.testToast("Username, fullname and password must be present")}}},Pe=$e,Te=(a("6165"),Object(T["a"])(Pe,Ee,Ne,!1,null,"267cd513",null)),Se=Te.exports,Ae={components:{Login:xe,Signup:Se},mounted:function(){""==this.$store.getters.getUserID?console.log("No user"):this.$router.push("/")}},Ie=Ae,Ue=Object(T["a"])(Ie,_e,be,!1,null,null,null),je=Ue.exports,De=[{path:"",component:F},{path:"/",component:F},{path:"/register",component:je},{path:"/owners",beforeEnter:Re,component:Yt},{path:"/users",beforeEnter:Re,component:dt},{path:"/okupas",beforeEnter:Re,component:jt},{path:"/propertie",beforeEnter:Re,component:de},{path:"/properties",beforeEnter:Re,component:de},{path:"/addproperties",beforeEnter:Be,component:ge},{path:"*",component:V}];function Re(t,e,a){""!=k.getters.getUserID&&""!=k.getters.getToken?a():a("/register")}function Be(t,e,a){console.log(k.getters.getRole),""!=k.getters.getUserID&&""!=k.getters.getToken&&"admin"==k.getters.getRole?a():a("/register")}var Me=a("1881"),Je=a.n(Me);a("2b44");n["a"].use(Je.a),n["a"].use(i["a"]);var Le=new i["a"]({routes:De,base:"/#app",mode:"abstract"});new n["a"]({el:"#app",router:Le,render:function(t){return t(D)},store:k}).$mount("#app"),Le.replace("/")},"5f4c":function(t,e,a){"use strict";var s=a("ffae"),o=a.n(s);o.a},6165:function(t,e,a){"use strict";var s=a("400f"),o=a.n(s);o.a},"85ec":function(t,e,a){},c30b:function(t,e,a){"use strict";var s=a("4f81"),o=a.n(s);o.a},e844:function(t,e,a){t.exports=a.p+"img/logo_okupa.79777446.png"},ffae:function(t,e,a){}});
//# sourceMappingURL=app.f92d6877.js.map